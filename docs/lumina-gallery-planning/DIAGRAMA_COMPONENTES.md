# ğŸ“ DIAGRAMAS DE ARQUITECTURA - LUMINA GALLERY

> VisualizaciÃ³n de la estructura de componentes y flujos de datos

---

## ğŸ—ï¸ ARQUITECTURA GENERAL

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         APP LAYOUT                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                      Providers                            â”‚  â”‚
â”‚  â”‚  â€¢ QueryClientProvider (TanStack Query)                  â”‚  â”‚
â”‚  â”‚  â€¢ ThemeProvider (Theme Context)                         â”‚  â”‚
â”‚  â”‚  â€¢ Toaster (Sonner)                                      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚           â”‚                                             â”‚  â”‚
â”‚  â”‚  SIDEBAR  â”‚           MAIN CONTENT AREA                 â”‚  â”‚
â”‚  â”‚           â”‚                                             â”‚  â”‚
â”‚  â”‚  â€¢ Logo   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â€¢ Nav    â”‚  â”‚                                      â”‚  â”‚  â”‚
â”‚  â”‚  â€¢ User   â”‚  â”‚        PAGE COMPONENT                â”‚  â”‚  â”‚
â”‚  â”‚           â”‚  â”‚  (Timeline/Explore/Favorites/etc)   â”‚  â”‚  â”‚
â”‚  â”‚           â”‚  â”‚                                      â”‚  â”‚  â”‚
â”‚  â”‚           â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚           â”‚                                             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              GLOBAL MODALS/OVERLAYS                      â”‚  â”‚
â”‚  â”‚  â€¢ ImageGallery (Lightbox)                              â”‚  â”‚
â”‚  â”‚  â€¢ ThemePanel                                           â”‚  â”‚
â”‚  â”‚  â€¢ UploadModal                                          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ§© ATOMIC DESIGN HIERARCHY

```
ATOMS (Building Blocks)
â”œâ”€â”€ Button
â”‚   â”œâ”€â”€ PrimaryButton
â”‚   â”œâ”€â”€ SecondaryButton
â”‚   â”œâ”€â”€ IconButton
â”‚   â””â”€â”€ FavoriteButton
â”œâ”€â”€ Input
â”‚   â”œâ”€â”€ TextInput
â”‚   â”œâ”€â”€ SearchInput
â”‚   â””â”€â”€ DateInput
â”œâ”€â”€ Badge
â”‚   â”œâ”€â”€ TagBadge
â”‚   â”œâ”€â”€ CountBadge
â”‚   â””â”€â”€ StatusBadge
â”œâ”€â”€ Image
â”‚   â”œâ”€â”€ OptimizedImage
â”‚   â”œâ”€â”€ Thumbnail
â”‚   â””â”€â”€ Avatar
â””â”€â”€ Feedback
    â”œâ”€â”€ LoadingSpinner
    â”œâ”€â”€ SkeletonLoader
    â””â”€â”€ Toast

MOLECULES (Simple Combinations)
â”œâ”€â”€ Navigation
â”‚   â”œâ”€â”€ SidebarItem (Icon + Label + Badge)
â”‚   â”œâ”€â”€ NavLink
â”‚   â””â”€â”€ Breadcrumb
â”œâ”€â”€ Search
â”‚   â”œâ”€â”€ SearchBar (Input + Icon + Clear)
â”‚   â””â”€â”€ SearchSuggestion
â”œâ”€â”€ Filter
â”‚   â”œâ”€â”€ FilterChip (Label + Remove)
â”‚   â””â”€â”€ DateRangePicker
â”œâ”€â”€ Card
â”‚   â”œâ”€â”€ ImageCard (Image + Overlay + Actions)
â”‚   â”œâ”€â”€ AlbumCard (Cover + Title + Count)
â”‚   â””â”€â”€ SmartAlbumCard
â””â”€â”€ Form
    â”œâ”€â”€ FormField (Label + Input + Error)
    â””â”€â”€ TagInput (Input + Tags)

ORGANISMS (Complex Sections)
â”œâ”€â”€ Layout
â”‚   â”œâ”€â”€ Sidebar (Profile + Navigation)
â”‚   â”œâ”€â”€ TopBar (Breadcrumb + Actions)
â”‚   â””â”€â”€ MobileMenu
â”œâ”€â”€ Gallery
â”‚   â”œâ”€â”€ BentoGrid (Masonry + Items)
â”‚   â”œâ”€â”€ TimelineGrid (DateGroups + Images)
â”‚   â””â”€â”€ ImageGallery (Viewer + Controls + ExifPanel)
â”œâ”€â”€ Panels
â”‚   â”œâ”€â”€ FilterPanel (Search + Filters)
â”‚   â”œâ”€â”€ ExifPanel (Metadata)
â”‚   â””â”€â”€ ThemePanel (Previews + Selector)
â””â”€â”€ Albums
    â”œâ”€â”€ SmartAlbumCreator (RuleBuilder)
    â””â”€â”€ AlbumGrid (Cards)

TEMPLATES (Page Layouts)
â”œâ”€â”€ MainLayout (Sidebar + Content)
â”œâ”€â”€ GalleryLayout (Grid + Filters)
â””â”€â”€ DetailLayout (Viewer + Sidebar)

PAGES (Complete Views)
â”œâ”€â”€ HomePage (Bento + SmartAlbums)
â”œâ”€â”€ TimelinePage (InfiniteScroll)
â”œâ”€â”€ ExplorePage (Search + Results)
â”œâ”€â”€ FavoritesPage (Grid)
â”œâ”€â”€ AlbumPage (Detail)
â””â”€â”€ SettingsPage (Config)
```

---

## ğŸ”„ DATA FLOW DIAGRAM

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      CLIENT (Browser)                        â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚              React Components Tree                      â”‚ â”‚
â”‚  â”‚                                                          â”‚ â”‚
â”‚  â”‚  Page Component                                         â”‚ â”‚
â”‚  â”‚    â†“                                                    â”‚ â”‚
â”‚  â”‚  Custom Hooks (useQuery, useMutation)                  â”‚ â”‚
â”‚  â”‚    â†“                                                    â”‚ â”‚
â”‚  â”‚  TanStack Query (Cache + State)                       â”‚ â”‚
â”‚  â”‚    â†“                                                    â”‚ â”‚
â”‚  â”‚  API Calls (fetch)                                     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                        â†“                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                    NETWORK (HTTP/HTTPS)
                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        â†“                                       â”‚
â”‚                 SERVER (Next.js)                               â”‚
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚            API Routes (/api/*)                         â”‚  â”‚
â”‚  â”‚                                                          â”‚  â”‚
â”‚  â”‚  â€¢ /api/timeline      â†’ GET images chronologically     â”‚  â”‚
â”‚  â”‚  â€¢ /api/favorites     â†’ GET/POST favorites             â”‚  â”‚
â”‚  â”‚  â€¢ /api/images/[id]   â†’ CRUD single image              â”‚  â”‚
â”‚  â”‚  â€¢ /api/search        â†’ POST search query              â”‚  â”‚
â”‚  â”‚  â€¢ /api/smart-albums  â†’ GET/POST smart albums          â”‚  â”‚
â”‚  â”‚  â€¢ /api/upload        â†’ POST new images                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                        â†“                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              Prisma ORM                                â”‚  â”‚
â”‚  â”‚  â€¢ Query builder                                       â”‚  â”‚
â”‚  â”‚  â€¢ Type-safe queries                                   â”‚  â”‚
â”‚  â”‚  â€¢ Connection pooling                                  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                        â†“                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        â†“                                       â”‚
â”‚                  DATABASE (PostgreSQL)                         â”‚
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚   albums   â”‚  â”‚   images   â”‚  â”‚ smart_albums â”‚           â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤           â”‚
â”‚  â”‚ id         â”‚  â”‚ id         â”‚  â”‚ id           â”‚           â”‚
â”‚  â”‚ year       â”‚  â”‚ album_id   â”‚  â”‚ title        â”‚           â”‚
â”‚  â”‚ title      â”‚  â”‚ url        â”‚  â”‚ rules        â”‚           â”‚
â”‚  â”‚ cover_url  â”‚  â”‚ isFavorite â”‚  â”‚ isSystem     â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ exifData   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                  â”‚ takenAt    â”‚                               â”‚
â”‚                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                               â”‚
â”‚                        â†“                                       â”‚
â”‚                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                               â”‚
â”‚                  â”‚    tags    â”‚                               â”‚
â”‚                  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                               â”‚
â”‚                  â”‚ id         â”‚                               â”‚
â”‚                  â”‚ name       â”‚                               â”‚
â”‚                  â”‚ category   â”‚                               â”‚
â”‚                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ COMPONENT INTERACTION: BentoGrid Example

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    HomePage (Server Component)                â”‚
â”‚                                                                â”‚
â”‚  1. Fetch initial data from DB                               â”‚
â”‚  2. Pass to client component                                 â”‚
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚         BentoGridClient (Client Component)             â”‚  â”‚
â”‚  â”‚                                                          â”‚  â”‚
â”‚  â”‚  State:                                                 â”‚  â”‚
â”‚  â”‚  â€¢ selectedImageId: string | null                      â”‚  â”‚
â”‚  â”‚                                                          â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚          BentoGrid (Presentational)              â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                                                    â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  Props:                                           â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ images: Image[]                                â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ onImageClick: (id) => void                     â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ onFavoriteToggle: (id, isFav) => void         â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                                                    â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚   Masonry (react-masonry-css)             â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚                                             â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚   â”‚   ImageCard (Item)               â”‚    â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚   â”‚                                   â”‚    â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚   â”‚  â€¢ OptimizedImage                â”‚    â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚   â”‚  â€¢ FavoriteButton                â”‚    â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚   â”‚  â€¢ Overlay (on hover)            â”‚    â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚   â”‚                                   â”‚    â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚   â”‚  Events:                         â”‚    â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚   â”‚  â€¢ onClick â†’ onImageClick(id)    â”‚    â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚   â”‚  â€¢ onFav â†’ onFavoriteToggle()    â”‚    â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚   [Repeated for each image]               â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚                                                          â”‚  â”‚
â”‚  â”‚  {selectedImageId && (                                  â”‚  â”‚
â”‚  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚  â”‚
â”‚  â”‚    â”‚   ImageGallery (Modal/Lightbox)             â”‚    â”‚  â”‚
â”‚  â”‚    â”‚                                               â”‚    â”‚  â”‚
â”‚  â”‚    â”‚  â€¢ Current image viewer                      â”‚    â”‚  â”‚
â”‚  â”‚    â”‚  â€¢ Navigation arrows                         â”‚    â”‚  â”‚
â”‚  â”‚    â”‚  â€¢ ExifPanel (sidebar)                       â”‚    â”‚  â”‚
â”‚  â”‚    â”‚  â€¢ FavoriteButton                            â”‚    â”‚  â”‚
â”‚  â”‚    â”‚  â€¢ Close button                              â”‚    â”‚  â”‚
â”‚  â”‚    â”‚                                               â”‚    â”‚  â”‚
â”‚  â”‚    â”‚  Keyboard navigation:                        â”‚    â”‚  â”‚
â”‚  â”‚    â”‚  â€¢ â† â†’ : Navigate                            â”‚    â”‚  â”‚
â”‚  â”‚    â”‚  â€¢ Esc : Close                               â”‚    â”‚  â”‚
â”‚  â”‚    â”‚  â€¢ F   : Toggle favorite                     â”‚    â”‚  â”‚
â”‚  â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â”‚
â”‚  â”‚  )}                                                     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”€ STATE MANAGEMENT DIAGRAM

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    STATE LAYERS                              â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚         LOCAL STATE (useState, useReducer)           â”‚  â”‚
â”‚  â”‚                                                        â”‚  â”‚
â”‚  â”‚  â€¢ Component-specific state                          â”‚  â”‚
â”‚  â”‚  â€¢ UI state (modals, dropdowns, etc)                 â”‚  â”‚
â”‚  â”‚  â€¢ Form state                                        â”‚  â”‚
â”‚  â”‚                                                        â”‚  â”‚
â”‚  â”‚  Examples:                                            â”‚  â”‚
â”‚  â”‚  - selectedImageId                                   â”‚  â”‚
â”‚  â”‚  - isModalOpen                                       â”‚  â”‚
â”‚  â”‚  - searchQuery (local)                               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                          â†•                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚       GLOBAL CLIENT STATE (Zustand Store)            â”‚  â”‚
â”‚  â”‚                                                        â”‚  â”‚
â”‚  â”‚  useAppStore:                                         â”‚  â”‚
â”‚  â”‚  â€¢ sidebarOpen                                       â”‚  â”‚
â”‚  â”‚  â€¢ sidebarCollapsed                                  â”‚  â”‚
â”‚  â”‚  â€¢ filters (search, date range, etc)                 â”‚  â”‚
â”‚  â”‚  â€¢ user profile                                      â”‚  â”‚
â”‚  â”‚                                                        â”‚  â”‚
â”‚  â”‚  Persisted to localStorage                           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                          â†•                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚      SERVER STATE (TanStack Query Cache)             â”‚  â”‚
â”‚  â”‚                                                        â”‚  â”‚
â”‚  â”‚  Query Keys:                                          â”‚  â”‚
â”‚  â”‚  â€¢ ['timeline']        â†’ All images chronological    â”‚  â”‚
â”‚  â”‚  â€¢ ['favorites']       â†’ Favorite images             â”‚  â”‚
â”‚  â”‚  â€¢ ['albums']          â†’ All albums                  â”‚  â”‚
â”‚  â”‚  â€¢ ['album', id]       â†’ Single album                â”‚  â”‚
â”‚  â”‚  â€¢ ['smart-albums']    â†’ Smart albums                â”‚  â”‚
â”‚  â”‚  â€¢ ['search', query]   â†’ Search results              â”‚  â”‚
â”‚  â”‚                                                        â”‚  â”‚
â”‚  â”‚  Auto caching, refetching, invalidation              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                          â†•                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚           THEME STATE (Context API)                  â”‚  â”‚
â”‚  â”‚                                                        â”‚  â”‚
â”‚  â”‚  ThemeContext:                                        â”‚  â”‚
â”‚  â”‚  â€¢ currentTheme                                      â”‚  â”‚
â”‚  â”‚  â€¢ setTheme()                                        â”‚  â”‚
â”‚  â”‚  â€¢ availableThemes                                   â”‚  â”‚
â”‚  â”‚                                                        â”‚  â”‚
â”‚  â”‚  Synced with localStorage and CSS variables          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“± RESPONSIVE LAYOUT BREAKPOINTS

```
MOBILE (< 768px)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   [â˜°] Header    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                 â”‚
â”‚   Main Content  â”‚
â”‚                 â”‚
â”‚   (Full Width)  â”‚
â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Sidebar: Collapsed to hamburger menu
Grid: 1 column
Navigation: Bottom sheet


TABLET (768px - 1024px)
â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      â”‚              â”‚
â”‚ Side â”‚    Main      â”‚
â”‚ bar  â”‚   Content    â”‚
â”‚      â”‚              â”‚
â”‚ (80) â”‚  (Grid 2-3)  â”‚
â”‚      â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Sidebar: Icon-only (collapsed)
Grid: 2-3 columns
Navigation: Always visible


DESKTOP (> 1024px)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          â”‚                   â”‚
â”‚          â”‚      Main         â”‚
â”‚ Sidebar  â”‚     Content       â”‚
â”‚          â”‚                   â”‚
â”‚  (256)   â”‚   (Grid 3-4)      â”‚
â”‚          â”‚                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Sidebar: Full width with labels
Grid: 3-4 columns
Navigation: Full featured


LARGE DESKTOP (> 1536px)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          â”‚                          â”‚
â”‚          â”‚         Main             â”‚
â”‚ Sidebar  â”‚        Content           â”‚
â”‚          â”‚                          â”‚
â”‚  (256)   â”‚      (Grid 4-5)          â”‚
â”‚          â”‚                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Sidebar: Full width
Grid: 4-5 columns
Navigation: Full featured + spacing
```

---

## ğŸ¨ THEME SYSTEM FLOW

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    User Action                               â”‚
â”‚                  (Select Theme)                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ThemeContext.setTheme(themeId)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†“
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â†“                               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  localStorage   â”‚            â”‚  CSS Variables   â”‚
â”‚   Save theme    â”‚            â”‚   Apply colors   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“                               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Persist across  â”‚            â”‚  Re-render with  â”‚
â”‚   sessions      â”‚            â”‚   new styles     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              All Components React to Theme                   â”‚
â”‚                                                               â”‚
â”‚  â€¢ Sidebar â†’ glassmorphism effect                           â”‚
â”‚  â€¢ Cards â†’ background colors                                â”‚
â”‚  â€¢ Text â†’ text colors                                       â”‚
â”‚  â€¢ Buttons â†’ variant colors                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ INFINITE SCROLL FLOW (Timeline)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  TimelinePage Component                      â”‚
â”‚                                                               â”‚
â”‚  useInfiniteTimeline() Hook                                 â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚        TanStack Query (useInfiniteQuery)              â”‚  â”‚
â”‚  â”‚                                                         â”‚  â”‚
â”‚  â”‚  queryFn: fetchTimelineImages(cursor, limit)          â”‚  â”‚
â”‚  â”‚  getNextPageParam: (lastPage) => lastPage.nextCursor  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                            â†“                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                 Initial Load                          â”‚  â”‚
â”‚  â”‚  â€¢ Fetch first 50 images                             â”‚  â”‚
â”‚  â”‚  â€¢ Render in grid                                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                            â†“                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚           User Scrolls Down                           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                            â†“                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚    Intersection Observer (useInView)                  â”‚  â”‚
â”‚  â”‚    Detects sentinel element in viewport              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                            â†“                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚         fetchNextPage() triggered                     â”‚  â”‚
â”‚  â”‚  â€¢ Fetch next 50 images with cursor                  â”‚  â”‚
â”‚  â”‚  â€¢ Append to existing data                           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                            â†“                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚            Update UI                                  â”‚  â”‚
â”‚  â”‚  â€¢ Render new images                                 â”‚  â”‚
â”‚  â”‚  â€¢ Show loading spinner while fetching               â”‚  â”‚
â”‚  â”‚  â€¢ Hide sentinel if no more data                     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                               â”‚
â”‚  [Image] [Image] [Image] [Image]                            â”‚
â”‚  [Image] [Image] [Image] [Image]                            â”‚
â”‚  [Image] [Image] [Image] [Image]                            â”‚
â”‚         ...                                                  â”‚
â”‚  [Image] [Image] [Image] [Image]                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚  â”‚       Loading Spinner           â”‚ â† While fetching       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â”‚  <div ref={sentinelRef} />         â† Sentinel               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ­ ANIMATION LIFECYCLE

```
Component Mount
      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Framer Motion Variants                          â”‚
â”‚                                                               â”‚
â”‚  initial="hidden"                                            â”‚
â”‚    â†“                                                          â”‚
â”‚  { opacity: 0, y: 20 }  â† Component invisible, offset down  â”‚
â”‚    â†“                                                          â”‚
â”‚  animate="visible"                                           â”‚
â”‚    â†“                                                          â”‚
â”‚  { opacity: 1, y: 0 }   â† Fade in + slide up                â”‚
â”‚    â†“                                                          â”‚
â”‚  [Stagger children if container]                            â”‚
â”‚    â†“                                                          â”‚
â”‚  Each child animates with 50ms delay                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â†“
Component Visible & Interactive
      â†“
User Interaction (e.g., click to open modal)
      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Layout Animation                                â”‚
â”‚                                                               â”‚
â”‚  layoutId="image-123"  â† Shared between components          â”‚
â”‚    â†“                                                          â”‚
â”‚  Framer Motion calculates position difference               â”‚
â”‚    â†“                                                          â”‚
â”‚  Smooth FLIP animation (First, Last, Invert, Play)         â”‚
â”‚    â†“                                                          â”‚
â”‚  Image morphs from grid to fullscreen                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â†“
Component Unmount
      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Exit Animation                                  â”‚
â”‚                                                               â”‚
â”‚  exit="exit"                                                 â”‚
â”‚    â†“                                                          â”‚
â”‚  { opacity: 0, scale: 0.9 }  â† Fade out + scale down       â”‚
â”‚    â†“                                                          â”‚
â”‚  AnimatePresence waits for animation to complete            â”‚
â”‚    â†“                                                          â”‚
â”‚  Component removed from DOM                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ—‚ï¸ FILE STRUCTURE VISUALIZATION

```
src/
â”œâ”€â”€ app/                          # Next.js App Router
â”‚   â”œâ”€â”€ layout.tsx                # Root layout (providers)
â”‚   â”œâ”€â”€ page.tsx                  # Home (Server Component)
â”‚   â”œâ”€â”€ providers.tsx             # Client providers wrapper
â”‚   â”‚
â”‚   â”œâ”€â”€ timeline/
â”‚   â”‚   â””â”€â”€ page.tsx              # Timeline view
â”‚   â”œâ”€â”€ explore/
â”‚   â”‚   â””â”€â”€ page.tsx              # Explore with filters
â”‚   â”œâ”€â”€ favorites/
â”‚   â”‚   â””â”€â”€ page.tsx              # Favorites grid
â”‚   â”œâ”€â”€ albums/
â”‚   â”‚   â”œâ”€â”€ page.tsx              # Albums list
â”‚   â”‚   â””â”€â”€ [id]/
â”‚   â”‚       â””â”€â”€ page.tsx          # Album detail
â”‚   â”‚
â”‚   â”œâ”€â”€ api/                      # API Routes
â”‚   â”‚   â”œâ”€â”€ timeline/
â”‚   â”‚   â”‚   â””â”€â”€ route.ts
â”‚   â”‚   â”œâ”€â”€ favorites/
â”‚   â”‚   â”‚   â””â”€â”€ route.ts
â”‚   â”‚   â”œâ”€â”€ search/
â”‚   â”‚   â”‚   â””â”€â”€ route.ts
â”‚   â”‚   â””â”€â”€ images/
â”‚   â”‚       â””â”€â”€ [id]/
â”‚   â”‚           â”œâ”€â”€ route.ts
â”‚   â”‚           â””â”€â”€ favorite/
â”‚   â”‚               â””â”€â”€ route.ts
â”‚   â”‚
â”‚   â””â”€â”€ actions/                  # Server Actions
â”‚       â”œâ”€â”€ upload.ts
â”‚       â””â”€â”€ favorites.ts
â”‚
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ ui/                       # Atoms
â”‚   â”‚   â”œâ”€â”€ Button.tsx
â”‚   â”‚   â”œâ”€â”€ IconButton.tsx
â”‚   â”‚   â”œâ”€â”€ TextInput.tsx
â”‚   â”‚   â”œâ”€â”€ OptimizedImage.tsx
â”‚   â”‚   â”œâ”€â”€ LoadingSpinner.tsx
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚
â”‚   â”œâ”€â”€ layout/                   # Layout components
â”‚   â”‚   â”œâ”€â”€ Sidebar.tsx
â”‚   â”‚   â”œâ”€â”€ SidebarItem.tsx
â”‚   â”‚   â”œâ”€â”€ MainLayout.tsx
â”‚   â”‚   â””â”€â”€ TopBar.tsx
â”‚   â”‚
â”‚   â”œâ”€â”€ gallery/                  # Gallery organisms
â”‚   â”‚   â”œâ”€â”€ BentoGrid.tsx
â”‚   â”‚   â”œâ”€â”€ BentoGridClient.tsx
â”‚   â”‚   â”œâ”€â”€ TimelineGrid.tsx
â”‚   â”‚   â”œâ”€â”€ ImageGallery.tsx
â”‚   â”‚   â”œâ”€â”€ ImageCard.tsx
â”‚   â”‚   â””â”€â”€ ExifPanel.tsx
â”‚   â”‚
â”‚   â”œâ”€â”€ explore/
â”‚   â”‚   â”œâ”€â”€ SearchBar.tsx
â”‚   â”‚   â”œâ”€â”€ FilterPanel.tsx
â”‚   â”‚   â””â”€â”€ FilterChip.tsx
â”‚   â”‚
â”‚   â””â”€â”€ animations/
â”‚       â””â”€â”€ variants.ts           # Framer Motion variants
â”‚
â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ useAppStore.ts            # Zustand store
â”‚   â”œâ”€â”€ useInfiniteTimeline.ts
â”‚   â”œâ”€â”€ useFavorites.ts
â”‚   â”œâ”€â”€ useBentoLayout.ts
â”‚   â”œâ”€â”€ useMediaQuery.ts
â”‚   â””â”€â”€ useKeyboardNavigation.ts
â”‚
â”œâ”€â”€ contexts/
â”‚   â””â”€â”€ ThemeContext.tsx
â”‚
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ prisma.ts
â”‚   â”œâ”€â”€ api.ts
â”‚   â””â”€â”€ utils.ts
â”‚
â””â”€â”€ types/
    â”œâ”€â”€ image.ts
    â”œâ”€â”€ album.ts
    â”œâ”€â”€ exif.ts
    â””â”€â”€ theme.ts
```

---

## ğŸ§ª TESTING PYRAMID

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”
                    â”‚  E2E â”‚  â† Few, slow, expensive
                    â”‚ (5%) â”‚     (Playwright)
                    â””â”€â”€â”€â”€â”€â”€â”˜
                   /        \
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ Integration  â”‚  â† Some, medium speed
              â”‚    (25%)     â”‚     (React Testing Library)
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             /                \
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚    Unit Tests        â”‚  â† Many, fast, cheap
        â”‚      (70%)           â”‚     (Jest + RTL)
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

UNIT TESTS
â€¢ Individual components
â€¢ Custom hooks
â€¢ Utility functions
â€¢ Pure logic

INTEGRATION TESTS
â€¢ Component interactions
â€¢ Data fetching
â€¢ Form submissions
â€¢ User flows

E2E TESTS
â€¢ Critical user journeys
â€¢ Full app workflows
â€¢ Cross-browser testing
```

---

**Visual Guide Created**: 2026-01-18
**Purpose**: Component architecture visualization for Lumina Gallery
